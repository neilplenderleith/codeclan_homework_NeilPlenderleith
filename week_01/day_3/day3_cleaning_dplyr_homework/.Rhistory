movies <- read.csv("../data/movies.csv")
library(janitor)
library(tidyverse)
library(janitor)
movies <- read.csv("../data/movies.csv")
movies
glimpse(movies)
summary(movies)
view(movies)
movies_selected <- movies %>%
select(title, runtime, budget)
movies_selected %>%
summarise(sum(is.na))
movies_selected %>%
summarise(sum(is.na()))
movies_selected %>%
summarise(sum(is.na(*)))
movies_selected %>%
summarise(sum(is.na(title, runtime, budget)))
summarise(sum(is.na (c(title, runtime, budget)))
movies_selected %>%
movies_selected %>%
summarise(sum(is.na (c(title, runtime, budget))))
movies_selected %>%
summarise(sum(is.na(title)))
movies_selected %>%
summarise(title_na = sum(is.na(title)), runtime_na = sum(is.na(runtime)))
movies_selected %>%
summarise(title_na = sum(is.na(title)), runtime_na = sum(is.na(runtime))), budget_na = sum(is.na(budget))
movies_selected %>%
summarise(title_na = sum(is.na(title)), runtime_na = sum(is.na(runtime)), budget_na = sum(is.na(budget)))
movies_runtime <- movies %>%
mutate(runtime = na_if(runtime))
movies_runtime <- movies %>%
mutate(runtime = na_if(runtime, 0))
movies_runtime <- movies %>%
mutate(runtime = na_if(runtime, 0))
movies_runtime <- movies %>%
mutate(runtime = na_if(runtime, 0)) %>%
summarise(runtime_na = sum(is.na(runtime)))
movies_runtime <- movies %>%
mutate(runtime = na_if(runtime, 0)) %>%
movies_runtime <- movies %>%
mutate(runtime = na_if(runtime, 0))
movies_runtime %>%
summarise(runtime_na = sum(is.na(runtime)))
movies_imputed <- movies_runtime %>%
mutate(runtime = coalesce(runtime, median(runtime)))
movies_imputed %>% # quick check to see zeros have been turned to NA values
summarise(runtime_na = sum(is.na(runtime)))
movies_imputed <- movies_runtime %>%
mutate(runtime = coalesce(runtime, median(runtime)))
movies_imputed %>% # quick check to see zeros have been turned to NA values
summarise(runtime_na = sum(is.na(runtime)))
movies_imputed <- movies_runtime %>%
mutate(runtime = coalesce(runtime, median(runtime)))
movies_imputed %>% # quick check to see zeros have been turned to NA values
summarise(runtime_na = sum(is.na(runtime)))
movies_imputed <- movies_runtime %>%
mutate(runtime = coalesce(runtime, median(runtime, na.rm = TRUE)))
movies_imputed %>% # quick check to see zeros have been turned to NA values
summarise(runtime_na = sum(is.na(runtime)))
movies_imputed %>%
slice_head(10)
movies_imputed %>%
slice_head(n = 10)
movies_imputed %>%
slice_head(n = 10)
movies_imputed %>%
slice_tail(n = 10)
movies_imputed %>%
arrange(runtime) %>%
slice_head(n = 10)
movies_imputed %>%
arrange(desc(runtime)) %>%
slice_head(n = 10)
movies_imputed %>%
arrange(desc(runtime)) %>%
slice_tail(n = 10)
movies_imputed <- movies_imputed %>%
mutate(budget = if_else(budget < 100, (median(budget), na.rm = TRUE), budget))
movies_imputed <- movies_imputed %>%
mutate(budget = if_else(budget < 100, (median(budget)), na.rm = TRUE), budget)
movies_imputed <- movies_imputed %>%
mutate(budget = if_else(budget < 100, median(budget), budget))
movies_imputed <- movies_imputed %>%
mutate(budget = if_else(budget < 100, median(budget), budget))
movies_imputed <- movies_imputed %>%
mutate(budget = if_else(budget < 100, median(budget), budget))
view(movies_imputed)
movie_budgets <- movies_imputed %>%
mutate(budget_type = case_when(budget_type < 12000000 ~ "Small budget",
budget_type < 40000000 ~ "Medium Budget",
TRUE ~ "Big budget"))
movie_budgets <- movies_imputed %>%
mutate(budget_type = case_when(budget < 12000000 ~ "Small budget",
budget < 40000000 ~ "Medium Budget",
TRUE ~ "Big budget"))
movie_budgets
movie_budgets <- movies_imputed %>%
mutate(budget_type = case_when(budget < 12000000 ~ "Small budget",
budget < 40000000 ~ "Medium Budget",
TRUE ~ "Big budget"),
.after(budget))
movie_budgets <- movies_imputed %>%
mutate(budget_type = case_when(budget < 12000000 ~ "Small budget",
budget < 40000000 ~ "Medium Budget",
TRUE ~ "Big budget"),
)
movie_budgets
movie_budgets <- movies_imputed %>%
mutate(budget_type = case_when(budget < 12000000 ~ "Small budget",
budget < 40000000 ~ "Medium Budget",
TRUE ~ "Big budget"), .before("Budget")
)
movie_budgets <- movies_imputed %>%
mutate(budget_type = case_when(budget < 12000000 ~ "Small budget",
budget < 40000000 ~ "Medium Budget",
TRUE ~ "Big budget"), .before = budget
)
movie_budgets
movie_budgets <- movies_imputed %>%
mutate(budget_type = case_when(budget < 12000000 ~ "Small budget",
budget < 40000000 ~ "Medium Budget",
TRUE ~ "Big budget"), .after = budget
)
movie_budgets
movies %>%
select(where(is.character))
movies %>%
select(where(is.character)) %>%
summarise(across(.cols = everything(), sum(is.na)))
movies %>%
select(where(is.character)) %>%
summarise(across(.cols = everything(), is.na))
is.na
movies %>%
select(where(is.character)) %>%
summarise(across(.cols = everything(), sum(is.na)))
movies %>%
select(where(is.character)) %>%
summarise(across(.cols = everything(), ~ sum(is.na(.x))))
movies %>%
select(where(is.numeric)) %>%
summarise(across(.cols = everything(), ~ sum(is.na(.x))))
library(tidyverse)
library(janitor)
movies <- read.csv("../data/movies.csv")
movies
glimpse(movies)
summary(movies)
view(movies)
# The data isnt really in bad shape. As seen below there are few NA values althought there are a few 0 values which could be altered here and there
movies_selected <- movies %>%
select(title, runtime, budget)
movies_selected %>%
summarise(title_na = sum(is.na(title)),
runtime_na = sum(is.na(runtime)),
budget_na = sum(is.na(budget)))
movies_runtime <- movies %>%
mutate(runtime = na_if(runtime, 0))
movies_runtime %>% # quick check to see zeros have been turned to NA values
summarise(runtime_na = sum(is.na(runtime)))
movies_imputed <- movies_runtime %>%
mutate(runtime = coalesce(runtime, median(runtime, na.rm = TRUE))) # remember the na.rm = TRUE ARG!
movies_imputed %>% # quick check to see zeros have been turned to NA values
summarise(runtime_na = sum(is.na(runtime)))
movies_imputed %>%
arrange(desc(runtime)) %>%
slice_head(n = 10)
movies_imputed %>%
arrange(desc(runtime)) %>%
slice_tail(n = 10)
movies_imputed <- movies_imputed %>%
mutate(budget = if_else(budget < 100, median(budget), budget))
view(movies_imputed)
movie_budgets <- movies_imputed %>%
mutate(budget_type = case_when(budget < 12000000 ~ "Small budget",
budget < 40000000 ~ "Medium Budget",
TRUE ~ "Big budget"), .after = budget
)
movie_budgets
movies %>%
select(where(is.character)) %>%
summarise(across(.cols = everything(), ~ sum(is.na(.x))))
movies %>%
select(where(is.numeric)) %>%
summarise(across(.cols = everything(), ~ sum(is.na(.x))))
gc()
movie_budgets <- movies_imputed %>%
mutate(budget_type = case_when(budget < 12e6 ~ "Small budget",
budget < 40e6 ~ "Medium Budget",
TRUE ~ "Big budget"), .after = budget
)
movie_budgets
movies %>%
select(where(is.character)) %>%
summarise(across( ~ sum(is.na(.x))))
movies %>%
select(where(is.character)) %>%
summarise(across(.cols = everything() ~ sum(is.na(.x))))
movies %>%
select(where(is.character)) %>%
summarise(across(.cols = everything(), ~ sum(is.na(.x))))
summarise(across(.cols = everything(), ~ count(.x == 0)))
movies_selected %>%
summarise(title_na = sum(title == 0),
runtime_na = sum(is.na(runtime)),
budget_na = sum(is.na(budget)))
movies %>%
select(where(is.character)) %>%
summarise(across(.cols = everything(), ~ sum(is.na(.x))))
movies %>%
select(where(is.numeric)) %>%
summarise(across(.cols = everything(), ~ sum(is.na(.x))))
movies %>%
select(where(is.character)) %>%
summarise(across(.fns =  ~ sum(is.na(.x))))
#
# movies %>%
#   summarise(across(where(is.numeric), ~sum(is.na(.x)))) much better code from the answers - telling it the columns inside the across function rather than having to use the select function first
